---
title: '[텍스트 마이닝]'
date: 2019-03-26
---

## Java 설치하기

그냥 설치하려고 했더니

```python
!pip install Konlpy

Failed building wheel for JPype1
Command "c:\users\zlslsp54\anaconda3\envs\tensorflow\python.exe -u -c "import setuptools, tokenize;__file__='C:\\Users\\zlslsp54\\AppData\\Local\\Temp\\pip-install-0jwdszwc\\JPype1\\setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\r\n', '\n');f.close();exec(compile(code, __file__, 'exec'))" install --record C:\Users\zlslsp54\AppData\Local\Temp\pip-record-x1n3989k\install-record.txt --single-version-externally-managed --compile" failed with error code 1 in C:\Users\zlslsp54\AppData\Local\Temp\pip-install-0jwdszwc\JPype1\
```

JPype1 설치가 안되어 있다는 에러메시지를 받았다. 그래서 자바를 먼저 설치하고 JPype1을 설치해주자.

- https://www.oracle.com/technetwork/java/javase/downloads/jdk12-downloads-5295953.html
- 자신의 OS 버전과 맞는 Java SE Dev Kit을 설치해준다.
- 환경변수에 추가 해준다. `C:\Program Files\Java\jdk-12`
- JPype1 설치 : https://www.lfd.uci.edu/~gohlke/pythonlibs/#jpype
- JPype랑 모든 Java class libraries에 접근할 수 있게 해주는 툴이다.
- cp는 파이썬 버전, win32 | amd64는 os 비트 숫자를 나타내준다.
- 필자는 python 3.6.7 & 64bit를 사용하기에 `JPype1‑0.6.3‑cp36‑cp36m‑win_amd64.whl` 이 파일을 다운받고 아나콘다 가상환경을 사용하기에 `C:\Users\zlslsp54\Anaconda3`에 설치를 해주고 anaconda prompt에서 가상환경을 activate 해준 상태에서 JPype1 파일이 존재하는 경로로 들어가 설치를 해주면 가상환경에서(만?) 이용할 수 있도록 라이브러리가 생성된다.
- pip install JPype1-0.6.3-cp36-cp36m-win_amd64.whl
- pip install konlpy

## 간단한 형태소 분석 해보기

```python
# 5 종류의 형태소 분석기(한나눔, 꼬꼬마, Kormoran, MeCab, 트위터) 중 트위터 형태소 분석기 사용
# Twitter가 사용하기 가장 좋다.
from konlpy.tag import Twitter
twitter = Twitter()
malist = twitter.pos("언젠가한번쯤은돌아봐주겠죠한없이뒤에서기다리면오늘도차마못한가슴속한마디그댈사랑합니다.", norm=True, stem=True)
print(malist)

[('언젠가', 'Adverb'), ('한번', 'Noun'), ('쯤', 'Suffix'), ('은', 'Josa'), ('돌아보다', 'Verb'), ('한없이', 'Adverb'), ('뒤', 'Noun'), ('에서', 'Josa'), ('기다리다', 'Verb'), ('오늘', 'Noun'), ('도', 'Josa'), ('차마', 'Noun'), ('못', 'Noun'), ('한', 'Determiner'), ('가슴속', 'Noun'), ('한마디', 'Noun'), ('그', 'Noun'), ('대다', 'Verb'), ('사랑', 'Noun'), ('하다', 'Verb'), ('.', 'Punctuation')]
```
- norm 옵션과 stem 옵션을 사실 지정해주지 않아도 실행은 된다.
- norm 옵션은 "그래욬ㅋㅋ?" 을 "그래요" 처럼 변환해준다.
- stem 옵션은 "그렇다"라고 원형을 찾아준다.

머신러닝에 형태소 분석을 적용하기 전에 간단한 예를 살펴보자.

국립국어원의 "토지7"책의 명사 TOP50 빈도수 단어 추출하기

```python
import codecs
from bs4 import BeautifulSoup
from konlpy.tag import Twitter

# utf-16 인코딩으로 파일을 열고 글자를 출력하기
fp = codecs.open("BEXX0004.txt", 'r', encoding='utf-16')
type(fp)

keys = sorted(word_dic.items(), key = lambda x : x[1], reverse=True) # sort by numner + 역순으로
for word, count in keys[:50]:
    print("{0}({1}) ".format(word, count), end = "")
print()

것(5946) 말(3216) 그(3093) 사람(1947) 안(1782) 생각(1485) 내(1278) 이(1257) 놈(1245) 일(1134) 수(1089) 얼굴(1002) 집(966) 나(954) 상현(867) 때(858) 홍(840) 거(816) 못(702) 소리(672) 돈(660) 여자(657) 눈(639) 곳(636) 제(627) 얘기(627) 우리(615) 좀(603) 또(588) 한복(588) 니(585) 술(576) 그것(552) 조준(549) 네(543) 구(534) 명(531) 자신(501) 듯(480) 년(477) 더(468) 하나(462) 댁(450) 서희(450) 손(444) 때문(444) 게(438) 두(402) 어디(399) 길(384) 
```

## Word2Vec란
단어의 의미를 벡터로 표현하는 Word2Vec를 이용하여 **연관된 단어를 추출** 하거나 단어와 단어의 유사도를 확인할 수 있습니다. 또한 의미를 선형 계산할 수 있어서 '왕자 - 남성 + 여성 = 공주" 등의 계산도 할 수 있습니다.

## Gensim 설치
자연어 처리를 위한 라이브러리입니다. Word2Vec 이외의 글자 처리를 위한 여러 가지 기능을 가지고 있습니다.


## Gensim의 Word2Vec로 "토지" 읽어보기
